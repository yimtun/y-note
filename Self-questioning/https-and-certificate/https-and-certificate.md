#  1 密码学要解决的问题



## 1 机密性

让第三方看不到真实数据，只能看到密文



对称加密       mac是一种对称加密算法

非对称加密   也叫公开密钥算法





## 2 完整性



保证传输的数据完整     hash 算法      hash算法只可以验证数据的完整性，但是无法保证数据防篡改

数据被篡改也能被发现 mac 算法       跟hash算法一样，可以验证数据的完整性， 可以验证数据确实是由原始发送方发出的（防篡改，）





## 3 身份验证

需要 保证和的真实对方通信。 

数字签名技术



## 4 防抵赖

说话算数，如果说话不算数了，有证据证明他说过的话

数字签名技术





# 2 摘要算法



md5  和 sha 都是  hask 算法

hash   摘要 散列 指纹 都是一个意思

相同的输入必会产生相同的输出

###  

# 3 什么是数字签名



用途：   

身份验证      手机 指纹密码解锁  你的指纹就代表了你的身份 

防抵赖          就像 签合同按手印

数字签名技术 不是为了加密数据     是为了身份验证



生成签名

1 对明文数据   生成摘要  得到 A 

2  用 私钥加密 摘要A       得到B  B 也就是签名值

3  发送明文数据+加密后的摘要   即     明文数据+B



验证签名

1 公钥解密B  得到摘要值A

2 对明文数据计算摘要值 得到C

3  比较 A和C  如果一样就证明签名验证成功



关键点

私钥一定是 签名人持有的   没有外泄

不是为了加密数据 

利用的原理： 公钥只能解密和他成对儿的私钥加密的数据，公钥一旦可以解密，就可以认定私钥的持有者就是他所声明的身份 （身份验证）



# 4    pki  和证书



CA 机构  用非对称加密算法 生成密钥对  私钥A   公钥B



浏览器  操作系统默认会有CA机构的根证书，浏览器 操作系统默认就信任CA根证书   CA根证书里有公钥B



服务器实体   用非对称加密算法 生成密钥对  私钥C   公钥D



服务器实体 生成一个证书签名请求 E     其中主要包括（公钥D  网站域名等 有效期等）



CA 用私钥A  对 E  进行加密，也就是签发了一张证书F （还有其他合法性验证）



服务器实体  将CA机构签发的证书 F 放在自己的https 网站上



浏览器 用CA 根证书里的公钥B 去解密 服务器网站证书F   也就是验证签名   如果成功 只能说明 服务器证明了自己就是证书里所声明的身份

浏览器 就可以信任证书F 里的  公钥D

身份验证就结束了 后面是密钥协商的部分



curl -k 就代表不验证服务器证书F 直接使用证书F 里的公钥





# 5 密钥协商



服务器 用非对称加密算法 生成密钥对  私钥A   公钥B











浏览器用公钥D 去协商密钥 完成加密的通信。。。。。。































































 























